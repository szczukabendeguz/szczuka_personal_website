// ============================================
// INTRO OVERLAY & HYBRID GLITCH EFFECT
// ============================================
#intro-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    z-index: 10000;
    background-color: #000; // Restored to pure black

    display: flex;
    justify-content: center;
    align-items: center;
    overflow: hidden;

    &.fade-out {
        opacity: 0;
        visibility: hidden;
        transition: opacity 0.5s ease-out, visibility 0.5s;
        pointer-events: none;
    }
}

.glitch-wrapper {
    width: auto;
    height: auto;
}

.glitch {
    position: relative;
    color: #fff;
    font-size: 80px;
    font-family: 'Epilogue', sans-serif;
    font-weight: 800; // Match original weight
    line-height: 1;

    // Responsive
    @media (max-width: 768px) {
        font-size: 40px;
    }

    // Original Glitch (Pseudo-elements) - Always active unless vanishing
    &:not(.vanish) {

        &::before,
        &::after {
            padding: 0;
            color: white;
            content: attr(data-text);
            position: absolute;
            width: 100%;
            height: 100%;
            background: #000;
            overflow: hidden;
            top: 0;
            left: 0;
        }

        &::before {
            left: 3px;
            text-shadow: -2px 0 red;
            animation: glitch-animation-1 2s linear infinite alternate-reverse;
        }

        &::after {
            left: -3px;
            text-shadow: -2px 0 blue;
            animation: glitch-animation-2 2s linear infinite alternate-reverse;
        }
    }

    // Vanishing (Collapse with disintegration)
    &.vanish {
        animation: glitch-collapse 0.3s cubic-bezier(0.55, 0.085, 0.68, 0.53) forwards;

        // Hide pseudo-elements during vanish
        &::before,
        &::after {
            display: none;
        }
    }
}



@keyframes glitch-collapse {
    0% {
        opacity: 1;
        transform: scale(1) translateX(0) translateY(0);
        filter: blur(0px);
    }

    20% {
        opacity: 1;
        transform: scale(1.05) translateX(random(20) - 10px) translateY(random(20) - 10px);
        color: #4E9A26;
        filter: blur(1px);
    }

    40% {
        opacity: 0.9;
        transform: scale(0.95) translateX(random(40) - 20px) translateY(random(40) - 20px);
        color: #AC1212;
        filter: blur(2px);
    }

    60% {
        opacity: 0.6;
        transform: scale(0.7) translateX(random(60) - 30px) translateY(random(80) - 40px) rotate(random(30) - 15deg);
        color: #fff;
        filter: blur(3px);
    }

    80% {
        opacity: 0.3;
        transform: scale(0.4) translateX(random(100) - 50px) translateY(random(150) - 75px) rotate(random(60) - 30deg);
        filter: blur(5px);
    }

    100% {
        opacity: 0;
        transform: scale(0.1) translateX(random(150) - 75px) translateY(random(200) - 100px) rotate(random(90) - 45deg);
        filter: blur(10px);
        clip-path: polygon(0 50%, 100% 50%, 100% 50%, 0 50%);
    }
}

@keyframes glitch-animation-1 {
    $steps: 20;

    @for $i from 0 through $steps {
        #{percentage($i * (1 / $steps))} {
            clip: rect(random(150) + px, 9999px, random(150) + px, 0);
        }
    }
}

@keyframes glitch-animation-2 {
    $steps: 20;

    @for $i from 0 through $steps {
        #{percentage($i * (1 / $steps))} {
            clip: rect(random(150) + px, 9999px, random(150) + px, 0);
        }
    }
}